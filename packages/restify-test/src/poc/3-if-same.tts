type IfSame<A, B> = A[] extends B[] ? B[] extends A[] ? A : never : never;

let a: IfSame<'a' | 'b', 'a' | 'b'> = 'a';
let b: IfSame<'a' | 'b', 'b' | 'a'> = 'a';
let c: IfSame<'a', 'a' | 'b'> = 'a';
let d: IfSame<'a' | 'b', 'a'> = 'a';

export function createServer<AllRoutes extends string>() {

    function registerAllEndpoints<ProvidedRoutes extends string>(routes: IfSame<ProvidedRoutes, AllRoutes>[]) {

    }

    function createValidatedEndpoint(...magic) {

    }
    return {
        registerAllRoutes: registerAllEndpoints,
        createValidatedEndpoint
    }
}

// Pass the Type parameter in here
const {registerAllRoutes} = createServer<'A' | 'B' | 'C'>();

// Use type inference here
registerAllRoutes(['A', 'B', 'C']); // Ok
registerAllRoutes(['A', 'C', 'B']); // Ok
registerAllRoutes(['A', 'B', 'C', 'C']); // Ok (but ideally not)
registerAllRoutes(['A', 'B']); // Error, missing C